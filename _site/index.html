<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Analytics Playbook - Analytics Playbook</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="alternate" type="application/rss+xml" title="My Site RSS" href="/feed.xml" />
	<meta name="google-site-verification" content="jb8G-OKpGcofrmBS1UMKipsicRCLsh6qlYqI8vfi_6s" />
    <meta name="description" content="">
    <meta name="author" content="">
    <!-- styles -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
    <style>
      body { padding-top: 60px; /* 60px to make the container go all the way
      to the bottom of the topbar */ }
    </style>
    <link href="/assets/css/custom.css" rel="stylesheet">
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js">
      </script>
    <![endif]-->
    <!-- fav and touch icons -->
    <link rel="shortcut icon" href="assets/ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="/assets/ico/apple-touch-icon-57-precomposed.png">
    <!-- Adobe DTM Library -->
    <script src="//assets.adobedtm.com/0cc0e010ce8e1e1377a4055fc7a51f61b47d14dc/satelliteLib-365bfb734a97fe5729197abcd7095108eec22654.js"></script>
	<script type="text/javascript">
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-74213600-1', 'auto');
      ga('require', 'linkid')
      ga('send', 'pageview');
    </script>
  </head>
	<body class="default-page">
    <div class="container">
				<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
			<div class="container">
				<div class="navbar-header">

					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
						 <span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>
					</button>
					<a href="/" class="navbar-brand">Analytics Playbook</a>
				</div>

				<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
					<ul class="nav navbar-nav navbar-right">
						<li>
							<a href="/search.html">Search</a>
						</li>
						<li>
							<a href="/how_to_submit.html">How To Submit An Article</a>
						</li>
						<li>
							<a href="/about.html">About</a>
						</li>
						<li>
							<a href="https://github.com/digitalanalyticscookbook/digitalanalyticscookbook.github.io" target="_blank">Fork This!</a>
						</li>
						<li>
							<a href="/feed.xml"><img src="/images/feed-icon-14x14.png" title="RSS Feed" alt="RSS Feed" /></a>
						</li>
					</ul>
				</div>
			</div>
		</nav>

		<div class="row">
			<div class="col-md-3">
						
				<div class="panel-group" id="panel-testing">
					<div class="panel panel-default">
						<div class="panel-heading">
							 <a class="panel-title" data-toggle="collapse" data-parent="#panel-testing" href="#testing">testing</a>
						</div>
						<div id="testing" class="panel-collapse collapse">
							<div class="panel-body">
								
									
									  
									
								
									
									  
										<li data-section='/testing/target_class_workflow.html'><a href='/testing/target_class_workflow.html'>Adobe Target - Classic Workflow</a></li>
									  
									
									  
										<li data-section='/testing/intro_to_ab_testing.html'><a href='/testing/intro_to_ab_testing.html'>Introduction to AB Testing and P-Values</a></li>
									  
									
									  
										<li data-section='/testing/conductrics_setup_abtest_intro.html'><a href='/testing/conductrics_setup_abtest_intro.html'>Conductrics - Intro to Page Editing for Simple A-B Testing</a></li>
									  
									
								
							</div>
						</div>
					</div>
				</div>
			
				<div class="panel-group" id="panel-tagmanagement">
					<div class="panel panel-default">
						<div class="panel-heading">
							 <a class="panel-title" data-toggle="collapse" data-parent="#panel-tagmanagement" href="#tagmanagement">tagmanagement</a>
						</div>
						<div id="tagmanagement" class="panel-collapse collapse">
							<div class="panel-body">
								
									
									  
									
								
									
									  
										<li data-section='/tagmanagement/adobe_dtm_previous_page_name.html'><a href='/tagmanagement/adobe_dtm_previous_page_name.html'>Adobe DTM - Previous Page Name</a></li>
									  
									
									  
										<li data-section='/tagmanagement/adobe_dtm_console_messages.html'><a href='/tagmanagement/adobe_dtm_console_messages.html'>Adobe DTM - Using Browser Console Messages</a></li>
									  
									
									  
										<li data-section='/tagmanagement/set_record_visitors_type_adobe_dtm.html'><a href='/tagmanagement/set_record_visitors_type_adobe_dtm.html'>Adobe DTM - Set and Record Visitor type</a></li>
									  
									
									  
										<li data-section='/tagmanagement/json_datalayer_w3c_based.html'><a href='/tagmanagement/json_datalayer_w3c_based.html'>JSON Data Layer based on W3C norm</a></li>
									  
									
								
							</div>
						</div>
					</div>
				</div>
			
				<div class="panel-group" id="panel-api">
					<div class="panel panel-default">
						<div class="panel-heading">
							 <a class="panel-title" data-toggle="collapse" data-parent="#panel-api" href="#api">api</a>
						</div>
						<div id="api" class="panel-collapse collapse">
							<div class="panel-body">
								
									
									  
									
								
									
									  
										<li data-section='/api/python_groupby.html'><a href='/api/python_groupby.html'>Aggregate Sales Data using Python</a></li>
									  
									
									  
										<li data-section='/api/real-time-adobe-analytics-api-tutorial.html'><a href='/api/real-time-adobe-analytics-api-tutorial.html'>Real-Time Reporting Adobe Analytics API Tutorial</a></li>
									  
									
									  
										<li data-section='/api/python_identify_duplicate_data.html'><a href='/api/python_identify_duplicate_data.html'>Identifying Duplicate Sales Data using Python</a></li>
									  
									
									  
										<li data-section='/api/learn_sql_30_minutes.html'><a href='/api/learn_sql_30_minutes.html'>Learn SQL in 30 Minutes Using R and sqldf</a></li>
									  
									
								
							</div>
						</div>
					</div>
				</div>
			
				<div class="panel-group" id="panel-dataviz">
					<div class="panel panel-default">
						<div class="panel-heading">
							 <a class="panel-title" data-toggle="collapse" data-parent="#panel-dataviz" href="#dataviz">dataviz</a>
						</div>
						<div id="dataviz" class="panel-collapse collapse">
							<div class="panel-body">
								
									
									  
									
								
									
									  
										<li data-section='/dataviz/bar_charts.html'><a href='/dataviz/bar_charts.html'>Making Great Bar Charts In R</a></li>
									  
									
									  
										<li data-section='/dataviz/statebin.html'><a href='/dataviz/statebin.html'>Visualizing State Level Data With R and Statebins</a></li>
									  
									
								
							</div>
						</div>
					</div>
				</div>
			
			</div>
			<div class="col-md-9">
				<!-- This loops through the paginated posts -->

<h1 class="entry-title">

    <a href="/dataviz/bar_charts.html">Making Great Bar Charts In R</a>

</h1>
  <div id="meta-content">
      <div class="post-meta small">
          Jowanza Joseph &times; <a href="/index.html">April 11, 2016</a> &times; dataviz
      </div>
  </div>
  <div class="content">
    <h3 id="problem">Problem</h3>
<p>As data collection and aggregation grows in an organization, presenting and consuming that data can become a real challenge. A good foundation in visualization eases this burden. Using bar charts effectively can help with sw</p>

<h3 id="actions">Actions</h3>
<p>We will walk through an example of how to create a useful and beautiful barchart in R.</p>

<h3 id="example">Example</h3>

<p>In R, the library ggplot2 is your best friend when it comes to creatingstatic bar charts. You can create a simple one with the following code:</p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="kn">library</span><span class="p">(</span>ggplot2<span class="p">)</span>

ggplot<span class="p">(</span>mpg<span class="p">,</span> aes<span class="p">(</span><span class="kp">class</span><span class="p">,</span> fill <span class="o">=</span> <span class="kp">class</span><span class="p">))</span> <span class="o">+</span> geom_bar<span class="p">()</span></code></pre></div>

<p><img src="http://i.imgur.com/ZPrONaq.png" alt="image" /></p>

<p>This bar chart is simple and effect but we can do better. We can start simple by adding titles.</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">ggplot<span class="p">(</span>mpg<span class="p">,</span> aes<span class="p">(</span><span class="kp">class</span><span class="p">,</span> fill <span class="o">=</span> <span class="kp">class</span><span class="p">))</span> <span class="o">+</span> geom_bar<span class="p">()</span> <span class="o">+</span>
  labs<span class="p">(</span>title <span class="o">=</span> <span class="s">&quot;Count of Car Classes MPG Dataset&quot;</span><span class="p">,</span> x <span class="o">=</span> <span class="s">&quot;Car Class&quot;</span><span class="p">,</span> y <span class="o">=</span> <span class="s">&quot;Count&quot;</span><span class="p">)</span></code></pre></div>

<p><img src="http://i.imgur.com/56OPrfU.png" alt="image" /></p>

<p>The background space in this chart isn’t really pleasing to the eyes. We can make a customize the chart and make it all grey for effect:</p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="kn">library</span><span class="p">(</span>ggplot2<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>scales<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>grid<span class="p">)</span> 
<span class="kn">library</span><span class="p">(</span>RColorBrewer<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>extrafont<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>reshape<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>ggthemes<span class="p">)</span>

blogData <span class="o">=</span> mpg

palette <span class="o">&lt;-</span> brewer.pal<span class="p">(</span><span class="s">&quot;Greys&quot;</span><span class="p">,</span> n<span class="o">=</span><span class="m">9</span><span class="p">)</span>
color.background <span class="o">=</span> palette<span class="p">[</span><span class="m">2</span><span class="p">]</span>

ggplot<span class="p">(</span>mpg<span class="p">,</span> aes<span class="p">(</span><span class="kp">class</span><span class="p">,</span> fill <span class="o">=</span> <span class="kp">class</span><span class="p">))</span> <span class="o">+</span> geom_bar<span class="p">()</span> <span class="o">+</span>
  labs<span class="p">(</span>title <span class="o">=</span> <span class="s">&quot;Count of Car Classes MPG Dataset&quot;</span><span class="p">,</span> x <span class="o">=</span> <span class="s">&quot;Car Class&quot;</span><span class="p">,</span> y <span class="o">=</span> <span class="s">&quot;Count&quot;</span><span class="p">)</span><span class="o">+</span>
  theme_bw<span class="p">(</span>base_size<span class="o">=</span><span class="m">9</span><span class="p">)</span><span class="o">+</span>
  theme<span class="p">(</span>panel.background<span class="o">=</span>element_rect<span class="p">(</span>fill<span class="o">=</span>color.background<span class="p">,</span> color<span class="o">=</span>color.background<span class="p">))</span> <span class="o">+</span>
  theme<span class="p">(</span>plot.background<span class="o">=</span>element_rect<span class="p">(</span>fill<span class="o">=</span>color.background<span class="p">,</span> color<span class="o">=</span>color.background<span class="p">))</span> <span class="o">+</span>
  theme<span class="p">(</span>panel.border<span class="o">=</span>element_rect<span class="p">(</span>color<span class="o">=</span>color.background<span class="p">))</span><span class="o">+</span>
  theme<span class="p">(</span>legend.background <span class="o">=</span> element_rect<span class="p">(</span>fill<span class="o">=</span>color.background<span class="p">))</span></code></pre></div>

<p><img src="https://i.imgur.com/dQ3YlQZ.png" alt="image" /></p>

<p>A few more modifications can be made.</p>

<ol>
  <li>Sort by count</li>
  <li>Flip the axis</li>
  <li>Overlay the count</li>
  <li>Change the font of the chart</li>
  <li>Change the opacity of the bars</li>
  <li>Remove the legend (doesn’t add any value)</li>
  <li>Some other aesthetic fixes</li>
</ol>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="kn">library</span><span class="p">(</span>ggplot2<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>scales<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>grid<span class="p">)</span> 
<span class="kn">library</span><span class="p">(</span>RColorBrewer<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>extrafont<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>reshape<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>ggthemes<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>dplyr<span class="p">)</span>

blogData <span class="o">=</span> mpg

palette <span class="o">&lt;-</span> brewer.pal<span class="p">(</span><span class="s">&quot;Greys&quot;</span><span class="p">,</span> n<span class="o">=</span><span class="m">9</span><span class="p">)</span>
color.background <span class="o">=</span> palette<span class="p">[</span><span class="m">2</span><span class="p">]</span>

newMPG <span class="o">&lt;-</span> group_by<span class="p">(</span>mpg<span class="p">,</span><span class="kp">class</span><span class="p">)</span> <span class="o">%&gt;%</span>
  summarise<span class="p">(</span>total <span class="o">=</span> n<span class="p">())</span> <span class="o">%&gt;%</span>
  arrange<span class="p">(</span>desc<span class="p">(</span>total<span class="p">))</span>

ggplot<span class="p">(</span>newMPG<span class="p">,</span> aes<span class="p">(</span>x<span class="o">=</span>reorder<span class="p">(</span><span class="kp">class</span><span class="p">,</span> <span class="o">+</span>total<span class="p">),</span> total<span class="p">))</span> <span class="o">+</span> coord_flip<span class="p">()</span><span class="o">+</span> geom_bar<span class="p">(</span>fill <span class="o">=</span> <span class="s">&quot;#6f00ff&quot;</span><span class="p">,</span> stat<span class="o">=</span><span class="s">&quot;identity&quot;</span><span class="p">)</span> <span class="o">+</span>
  labs<span class="p">(</span>title <span class="o">=</span> <span class="s">&quot;Count of Car Classes&quot;</span><span class="p">,</span> x <span class="o">=</span> <span class="s">&quot;Car Class&quot;</span><span class="p">,</span> y <span class="o">=</span> <span class="s">&quot;Count&quot;</span><span class="p">)</span><span class="o">+</span>
  geom_text<span class="p">(</span>aes<span class="p">(</span>y<span class="o">=</span>total <span class="o">-</span> <span class="m">1</span><span class="p">,</span> label<span class="o">=</span>total<span class="p">),</span> position <span class="o">=</span> position_dodge<span class="p">(</span><span class="m">.09</span><span class="p">),</span> vjust<span class="o">=</span> <span class="m">.5</span><span class="p">,</span> size <span class="o">=</span> <span class="m">3</span><span class="p">,</span> hjust <span class="o">=</span> <span class="m">1.3</span><span class="p">,</span> fontface<span class="o">=</span> <span class="s">&quot;bold&quot;</span><span class="p">,</span> family <span class="o">=</span> <span class="s">&quot;Hack&quot;</span><span class="p">)</span><span class="o">+</span>
  my_theme<span class="p">()</span>
  
my_theme <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">()</span> <span class="p">{</span>
  
  <span class="c1"># Generate the colors for the chart procedurally with RColorBrewer</span>
  palette <span class="o">&lt;-</span> brewer.pal<span class="p">(</span><span class="s">&quot;Greys&quot;</span><span class="p">,</span> n<span class="o">=</span><span class="m">9</span><span class="p">)</span>
  color.background <span class="o">=</span> palette<span class="p">[</span><span class="m">2</span><span class="p">]</span>
  color.grid.major <span class="o">=</span> palette<span class="p">[</span><span class="m">3</span><span class="p">]</span>
  color.axis.text <span class="o">=</span> palette<span class="p">[</span><span class="m">6</span><span class="p">]</span>
  color.axis.title <span class="o">=</span> palette<span class="p">[</span><span class="m">7</span><span class="p">]</span>
  color.title <span class="o">=</span> palette<span class="p">[</span><span class="m">9</span><span class="p">]</span>
  
  <span class="c1"># Begin construction of chart</span>
  theme_bw<span class="p">(</span>base_size<span class="o">=</span><span class="m">9</span><span class="p">)</span> <span class="o">+</span>
    
    <span class="c1"># Set the entire chart region to a light gray color</span>
    theme<span class="p">(</span>panel.background<span class="o">=</span>element_rect<span class="p">(</span>fill<span class="o">=</span>color.background<span class="p">,</span> color<span class="o">=</span>color.background<span class="p">))</span> <span class="o">+</span>
    theme<span class="p">(</span>plot.background<span class="o">=</span>element_rect<span class="p">(</span>fill<span class="o">=</span>color.background<span class="p">,</span> color<span class="o">=</span>color.background<span class="p">))</span> <span class="o">+</span>
    theme<span class="p">(</span>panel.border<span class="o">=</span>element_rect<span class="p">(</span>color<span class="o">=</span>color.background<span class="p">))</span> <span class="o">+</span>
    
    
    <span class="c1"># Format the grid</span>
    theme<span class="p">(</span>panel.grid.major<span class="o">=</span>element_line<span class="p">(</span>color<span class="o">=</span>color.grid.major<span class="p">,</span>size<span class="o">=</span><span class="m">.25</span><span class="p">))</span> <span class="o">+</span>
    theme<span class="p">(</span>panel.grid.minor<span class="o">=</span>element_blank<span class="p">())</span> <span class="o">+</span>
    theme<span class="p">(</span>axis.ticks<span class="o">=</span>element_blank<span class="p">())</span> <span class="o">+</span>
    
    
    <span class="c1"># Format the legend, but hide by default</span>
    theme<span class="p">(</span>legend.position<span class="o">=</span><span class="s">&quot;none&quot;</span><span class="p">)</span> <span class="o">+</span>
    theme<span class="p">(</span>legend.background <span class="o">=</span> element_rect<span class="p">(</span>fill<span class="o">=</span>color.background<span class="p">))</span> <span class="o">+</span>
    theme<span class="p">(</span>legend.text <span class="o">=</span> element_text<span class="p">(</span>size<span class="o">=</span><span class="m">7</span><span class="p">,</span>color<span class="o">=</span>color.axis.title<span class="p">))</span> <span class="o">+</span>
    
    
    <span class="c1"># Set title and axis labels, and format these and tick marks</span>
    theme<span class="p">(</span>plot.title<span class="o">=</span>element_text<span class="p">(</span>color<span class="o">=</span>color.title<span class="p">,</span> size<span class="o">=</span><span class="m">15</span><span class="p">,</span> vjust<span class="o">=</span><span class="m">1.25</span><span class="p">,</span>face<span class="o">=</span><span class="s">&quot;bold&quot;</span><span class="p">,</span> family<span class="o">=</span><span class="s">&quot;Hack&quot;</span><span class="p">))</span> <span class="o">+</span>
    theme<span class="p">(</span>axis.text.x<span class="o">=</span>element_text<span class="p">(</span>size<span class="o">=</span><span class="m">10</span><span class="p">,</span>color<span class="o">=</span>color.axis.text<span class="p">))</span> <span class="o">+</span>
    theme<span class="p">(</span>axis.text.y<span class="o">=</span>element_text<span class="p">(</span>size<span class="o">=</span><span class="m">10</span><span class="p">,</span>color<span class="o">=</span>color.axis.text<span class="p">))</span> <span class="o">+</span>
    theme<span class="p">(</span>axis.title.x<span class="o">=</span>element_text<span class="p">(</span>size<span class="o">=</span><span class="m">10</span><span class="p">,</span>color<span class="o">=</span>color.axis.title<span class="p">,</span> vjust<span class="o">=</span><span class="m">0</span><span class="p">,</span> face<span class="o">=</span><span class="s">&quot;bold&quot;</span><span class="p">,</span> family<span class="o">=</span> <span class="s">&quot;Hack&quot;</span><span class="p">))</span> <span class="o">+</span>
    theme<span class="p">(</span>axis.title.y<span class="o">=</span>element_text<span class="p">(</span>size<span class="o">=</span><span class="m">10</span><span class="p">,</span>color<span class="o">=</span>color.axis.title<span class="p">,</span> vjust<span class="o">=</span><span class="m">1.25</span><span class="p">,</span> face<span class="o">=</span><span class="s">&quot;bold&quot;</span><span class="p">,</span> family <span class="o">=</span> <span class="s">&quot;Hack&quot;</span><span class="p">))</span> <span class="o">+</span> 
    theme<span class="p">(</span>strip.text.y <span class="o">=</span> element_text<span class="p">(</span>size <span class="o">=</span> <span class="m">10</span><span class="p">,</span> colour <span class="o">=</span> <span class="s">&quot;black&quot;</span><span class="p">,</span> face<span class="o">=</span><span class="s">&quot;bold&quot;</span><span class="p">,</span> family <span class="o">=</span> <span class="s">&quot;Hack&quot;</span><span class="p">))</span> <span class="o">+</span>
    theme<span class="p">(</span>strip.background <span class="o">=</span> element_rect<span class="p">(</span>fill<span class="o">=</span>color.background<span class="p">,</span> color<span class="o">=</span>color.background<span class="p">,</span> size<span class="o">=</span><span class="m">1</span><span class="p">))</span> <span class="o">+</span>
    
    <span class="c1"># Plot margins</span>
    theme<span class="p">(</span>plot.margin <span class="o">=</span> unit<span class="p">(</span><span class="kt">c</span><span class="p">(</span><span class="m">0.35</span><span class="p">,</span> <span class="m">0.2</span><span class="p">,</span> <span class="m">0.3</span><span class="p">,</span> <span class="m">0.35</span><span class="p">),</span> <span class="s">&quot;cm&quot;</span><span class="p">))</span>
<span class="p">}</span></code></pre></div>

<p><img src="http://i.imgur.com/DOnynEA.png" alt="image" /></p>

<p>Now we have a chart worth sharing.</p>

<h3 id="references">References:</h3>

<p><a href="http://docs.ggplot2.org/current/">ggplot2</a></p>

<p><a href="http://minimaxir.com/2015/02/ggplot-tutorial/">Max Woolf</a></p>


    <hr>
  </div>

<h1 class="entry-title">

    <a href="/tagmanagement/adobe_dtm_previous_page_name.html">Adobe DTM - Previous Page Name</a>

</h1>
  <div id="meta-content">
      <div class="post-meta small">
          Till Buettner &times; <a href="/index.html">March 30, 2016</a> &times; tagmanagement
      </div>
  </div>
  <div class="content">
    <h3 id="problem">Problem</h3>

<p>You want to track the previous page name via Adobe DTM but you can’t use a Plugin (getPreviousValue).</p>

<h3 id="actions">Actions</h3>

<p>You can use Session Storage to track the previous page name.</p>

<h3 id="explanation-resolution">Explanation (resolution)</h3>

<p>You need two Page Load Rules (PLR) to track the previous page name. First PLR:</p>

<ul>
  <li>Name: Save prior page name to session storage</li>
  <li>Trigger Rule at “DOM Ready”</li>
  <li>Rule Condition: Path “.*” (regex enabled)</li>
  <li>Custom Code “None-Sequential Javascript”:</li>
</ul>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">if</span><span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="nx">Storage</span><span class="p">)</span> <span class="o">!=</span> <span class="s2">&quot;undefined&quot;</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">pagename</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">pageName</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></div>

<p>Second PLR:</p>

<ul>
  <li>Name: Save prior page name to prop</li>
  <li>Trigger Rule at “Bottom of Page”</li>
  <li>Rule Condition: Path “.*” (regex enabled)</li>
  <li>Rule Condition - Custom:</li>
</ul>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">if</span><span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="nx">Storage</span><span class="p">)</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span><span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="s2">&quot;pagename&quot;</span><span class="p">))</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">prevPageName</span> <span class="o">=</span> <span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="s2">&quot;pagename&quot;</span><span class="p">);</span>
    <span class="nx">_satellite</span><span class="p">.</span><span class="nx">setVar</span><span class="p">(</span><span class="s2">&quot;previousPage&quot;</span><span class="p">,</span><span class="nx">prevPageName</span><span class="p">);</span>
    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></div>

<ul>
  <li>Adobe Analytics: prop2 set as %previousPage% //Or any other prop you want to use, just enable pathing on it.</li>
</ul>

<p>There you go, the previous pageName is implemented.</p>

<h3 id="references">References</h3>
<p><a href="http://apastebin.tumblr.com/post/139627646180/adobe-analytics-dtm-previous-pagename">Previous page name - apastebin</a></p>

    <hr>
  </div>

<h1 class="entry-title">

    <a href="/tagmanagement/adobe_dtm_console_messages.html">Adobe DTM - Using Browser Console Messages</a>

</h1>
  <div id="meta-content">
      <div class="post-meta small">
          Jason Thompson &times; <a href="/index.html">March 30, 2016</a> &times; tagmanagement
      </div>
  </div>
  <div class="content">
    <h3 id="problem">Problem</h3>
<p>Error messaging, or messaging in general, is often overlooked in the development process causing difficulties in debugging and managing code deployed by a TMS.</p>

<h3 id="actions">Actions</h3>
<p>You can leverage a function called <code>_satellite.notify()</code>, a cross browser supported function, contained within DTM to send informative messages to the browser console. This is especially helpful when deploying 3rd party scripts.</p>

<h3 id="explanation-resolution">Explanation (resolution)</h3>

<p>At it’s most basic level, <code>_satellite.notify()</code> takes two arguments to send a message to the browser console:</p>

<ul>
  <li>Descriptive message text</li>
  <li>Numeric level of intensity</li>
</ul>

<p>Let’s use a working example to understand how we can use <code>_satellite.notify()</code> to send messages to the browser about the status of a 3rd party marketing pixel.</p>

<h4 id="intensity-1---a-message-that-the-pixel-fired">Intensity 1 - A message that the pixel fired</h4>
<p><code>_satellite.notify("DoubleClick tag fired.", 1);</code>
<img src="/images/dtm_notify_1.png" alt="DTM Level 1 Notification" /></p>

<h4 id="intensity-3---a-message-about-the-end-of-the-campaign">Intensity 3 - A message about the end of the campaign</h4>
<p><code>_satellite.notify("The DoubleClick campaign ends in 5 days.", 3);</code>
<img src="/images/dtm_notify_3.png" alt="DTM Level 3 Notification" /></p>

<h4 id="intensity-4---a-message-that-the-campaign-has-ended">Intensity 4 - A message that the campaign has ended</h4>
<p><code>_satellite.notify("The DoubleClick campaign has ended. Please remove the pixel from Adobe DTM.", 4);</code>
<img src="/images/dtm_notify_4.png" alt="DTM Level 4 Notification" /></p>

<h4 id="intensity-5---a-message-alerting-a-critical-issue">Intensity 5 - A message alerting a critical issue</h4>
<p><code>_satellite.notify("The DoubleClick servers are taking longer than 3 seconds to respond.", 5);</code>
<img src="/images/dtm_notify_5.png" alt="DTM Level 5 Notification" /></p>

<h3 id="references">References</h3>
<p><a href="http://33sticks.com/avoid-the-marketing-pixel-wasteland/">Avoid the Marketing Pixel Wasteland</a></p>

    <hr>
  </div>


<!-- Pagination links -->

<div class="pagination">
  
    <span>&laquo; Prev</span>
  

  
    
       1
    
  
    
      <a href="/page2">2</a>
    
  
    
      <a href="/page3">3</a>
    
  
    
      <a href="/page4">4</a>
    
  
    
      <a href="/page5">5</a>
    
  

  
    <a href="/page2">Next &raquo;</a>
  
</div>


				<div id="tweet">
					<a href="https://twitter.com/share" class="twitter-share-button" data-via="APlaybookOrg" data-size="large" data-hashtags="measure">Tweet</a>
					<script type="text/javascript">!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
				</div>
			</div>
		</div>
	</div>
    
		<!-- Latest jQuery Bootstrap JavaScript -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js">
    </script>
    <!-- Latest compiled and minified Bootstrap JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
	
	<!--Adobe DTM Footer code-->
	<script type="text/javascript">_satellite.pageBottom();</script>
  </body>
</html>
